[TOC]

参考：[开发 ASP.NET Core MVC 应用 | Microsoft Docs](https://docs.microsoft.com/zh-cn/dotnet/architecture/modern-web-apps-azure/develop-asp-net-core-mvc-apps)



### 领域驱动设计

- **简短通俗地讲：**

  领域驱动设计是一种软件开发方法，关注解决复杂业务问题。它要求开发人员深入理解业务需求，与领域专家密切合作，建立一个准确的业务模型。这样可以更好地构建适合业务的软件系统，提高可维护性和开发效率。

  

- **系统性理论：**

  领域驱动设计（Domain-Driven Design，简称DDD）是一种软件开发方法论，旨在帮助开发人员解决复杂业务领域中的设计和开发问题。DDD的核心理念是将软件开发过程中的焦点放在对业务领域的深入理解上，以此为基础进行系统的设计和建模。

  在领域驱动设计中，"领域"指的是所构建软件系统所涉及的业务领域，包括业务规则、业务流程、业务对象等。DDD强调开发团队与领域专家之间的密切合作，通过对业务领域的探索和沟通，共同建立一个统一的、准确反映业务需求的领域模型。

  领域驱动设计强调以下几个关键概念和技术：

  1. **领域模型（Domain Model）：**领域模型是对业务领域的抽象和表示，它是领域专家和开发团队共同构建的概念模型。领域模型贯穿整个软件开发过程，用于描述业务规则、业务对象及其之间的关系。
  2. **聚合（Aggregate）：**聚合是一组相关联的领域对象的集合，它们具有内聚性和边界。聚合通过定义一致的边界和一致的事务边界，保证了领域模型的一致性和完整性。
  3. **领域驱动设计的分层架构（Layered Architecture）：**DDD推崇分层架构，将软件系统划分为领域层、应用层、基础设施层等不同层次，每一层都有特定的职责和关注点，有助于解耦和提高系统的可维护性和可测试性。
  4. **战术设计模式（Tactical Design Patterns）：**DDD提供了一些常用的战术设计模式，如实体（Entity）、值对象（Value Object）、领域服务（Domain Service）等，用于在领域模型中解决常见的建模问题。
  5. **领域事件（Domain Events）：**领域事件是领域中发生的具有业务意义的事件，它们可以被捕获、记录和响应，有助于实现松耦合和可扩展的系统设计。

  通过采用领域驱动设计方法，开发人员可以更好地理解和应对复杂的业务需求，提高软件系统的可维护性、可扩展性和可测试性，同时提同时提高开发团队与领域专家之间的沟通和协作效果。DDD强调在软件开发过程中不断迭代和演化领域模型，通过对领域的深入理解和模型的不断优化，可以构建出更符合业务需求的软件系统。

  总结起来，领域驱动设计是一种以业务领域为核心的软件开发方法论，通过深入理解业务需求，建立统一的领域模型，并运用相关的设计模式和架构原则，帮助开发人员构建出高质量、可维护和可扩展的软件系统。



### 战略设计

- **简短通俗地讲：**

  战略设计是领域驱动设计中的一部分，它关注如何组织和管理复杂的业务领域。它涉及划分业务边界、建立共同语言、定义系统架构和解决不同部分之间的关系。通过战略设计，我们可以更好地组织业务，并确保系统的一致性和可扩展性。

  

- **系统性理论：**

  战略设计（Strategic Design）是领域驱动设计（DDD）方法中的一个重要概念，它关注的是在软件开发过程中如何有效地组织和管理复杂的业务领域。

  战略设计主要包括以下几个方面：

  1. **限界上下文（Bounded Context）：**限界上下文是将业务领域划分为不同的子领域或上下文的边界。每个上下文都有自己的业务规则、术语和模型。通过定义清晰的上下文边界，可以有效地管理和组织复杂的业务领域。
  2. **通用语言（Ubiquitous Language）：**通用语言是在整个开发团队和领域专家之间共同理解和使用的语言。通过建立一个统一的、清晰的通用语言，可以减少沟通障碍，提高开发团队与领域专家之间的合作效果。
  3. **战略架构（Strategic Architecture）：**战略架构定义了整个软件系统的高层结构，包括模块划分、上下文之间的关系和交互方式等。它帮助确定不同上下文之间的协作方式，并确保系统的可扩展性和灵活性。
  4. **上下文映射（Context Mapping）：**上下文映射是指不同上下文之间的交互方式和关系的定义。通过明确上下文之间的关系，可以解决跨上下文的一致性问题，确保不同上下文的协同工作。
  5. **战略设计模式（Strategic Design Patterns）：**战略设计模式提供了一些常用的模式和技术，用于处理不同上下文之间的复杂关系和交互。例如，共享内核（Shared Kernel）、开放主机服务（Open Host Service）等模式可以帮助解决不同上下文之间的集成问题。

  通过战略设计，开发团队可以更好地管理和组织复杂的业务领域，确保系统的一致性和可扩展性。它强调了对业务领域的整体规划和高层架构设计，为领域驱动设计提供了战略上的指导。



#### 限界上下文

限界上下文用于划分业务领域的范围。它把复杂的业务分成不同的部分，每个部分都有自己的规则和术语。这样做可以使得开发更加专注和清晰，同时避免不同部分之间的混淆和冲突。

##### 如何划定限界上下文?

划定限界上下文（Bounded Context）的过程通常需要与领域专家和开发团队紧密合作，并通过深入了解业务领域来进行。

以下是一些常见的方法和步骤，用于划定限界上下文：

1. 领域探索：与领域专家一起进行详尽的业务探讨和分析，了解业务的核心概念、规则和流程。通过开放的对话和交流，发现不同业务领域的上下文边界。
2. 业务功能：识别业务功能的不同部分和关联，考虑哪些功能在业务上有紧密关联，可以划定为一个限界上下文。例如，订单管理、用户管理等可以成为独立的上下文。
3. 业务规则：分析业务规则的不同特点和约束条件，考虑哪些规则在某个上下文内是一致的、相关的。根据业务规则的一致性和相关性，划定相应的上下文边界。
4. 语言和术语：观察业务领域中使用的术语和语言，考虑哪些术语在特定上下文中具有特殊含义和语义。根据术语和语言的差异，划分相应的上下文。
5. 团队组织：根据开发团队的组织和职责，考虑哪些团队可以负责某个上下文的开发和维护。根据团队组织的结构和职责，划定相应的上下文边界。
6. 上下文映射：当不同的上下文之间存在交互和关联时，使用上下文映射来定义它们之间的接口和通信方式。上下文映射有助于解决不同上下文之间的一致性和集成问题。

划定限界上下文需要综合考虑业务特点、团队组织和技术实现等因素。这是一个迭代的过程，需要不断与领域专家和开发团队进行反馈和确认，以达到清晰、一致的上下文划定。

#### 通用语言

#### 战略架构

#### 上下文映射图

#### 战略设计模式

用来描述限界上下文之间的映射关系

- 合作关系（Partnership）：两个上下文紧密合作的关系，一荣俱荣，一损俱损。
- 共享内核（Shared Kernel）：两个上下文依赖部分共享的模型。
- 客户方-供应方开发（Customer-Supplier     Development）：上下文之间有组织的上下游依赖。
- 遵奉者（Conformist）：下游上下文只能盲目依赖上游上下文。
- 防腐层（Anticorruption Layer,ACL）：一个上下文通过一些适配和转换与另一个上下文交互。
- 开放主机服务（Open     Host Service）：定义一种协议来让其他上下文来对本上下文进行访问。
- 发布语言（Published     Language）：通常与OHS一起使用，用于定义开放主机的协议。
- 大泥球（Big     Ball of Mud）：混杂在一起的上下文关系，边界不清晰。
- 另谋他路（SeparateWay）：两个完全没有任何联系的上下文。







领域、子域、核心域、支撑子域、通用子域、、

通用语言

领域事件、事件风暴、极限建模



### 战术设计

实体、值对象、聚合、聚合根、领域服务、领域事件



贫血模型、充血模型



- 存储库，用于提取持久保留详细信息。
- 工厂，用于封装复杂对象创建。
- 服务，用于封装复杂行为和/或基础结构实现细节。
- 命令模式，用于分离发出的命令并执行命令本身。
- 规约模式，用于封装查询细节。



整洁架构